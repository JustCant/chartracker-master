angular.module("hpTracker",[]),angular.module("hpTracker").controller("tableCtrl",["$scope",function(e){e.char={},e.playerChars=[],e.enemyChars=[],e.localChars=[];const t=$("#charNameAdd"),o=$("#namePopup"),a=$("#charHpAdd"),h=$("#hpPopup"),r=$("#hpPopup2");if(o.hide(),h.hide(),r.hide(),0===localStorage.length&&(e.playerChars.push({name:"Mario",hitPoints:"100",type:"hero",show:!1,popupShow:!1,id:"Mario"}),e.enemyChars.push({name:"King Bowser",hitPoints:"250",type:"enemy",show:!1,popupShow:!1,id:"Bowser"})),localStorage.length>0)for(let t=0;t<localStorage.length;t++){let o=JSON.parse(localStorage.getItem(localStorage.key(t)));e.localChars.push(o),"hero"===o.type?e.playerChars.push(o):"enemy"===o.type&&e.enemyChars.push(o)}else console.log("Nothing in local Storage");e.addHero=function(){e.char.type="hero",e.char.show=!1,e.char.popupShow=!1;let i=(new Date).getTime();if(e.char.id=i,e.char.name)if(e.char.hitPoints)if(isNaN(parseInt(e.char.hitPoints))){o.hide(),h.hide(),r.show();new Popper(a,r,{placement:"bottom"})}else o.hide(),h.hide(),r.hide(),e.playerChars.push(e.char),localStorage.setItem(`${e.char.id}`,JSON.stringify(e.char)),e.localChars.push(e.char),e.char={};else{o.hide(),h.show();new Popper(a,h,{placement:"bottom"})}else{o.show();new Popper(t,o,{placement:"bottom"})}},e.addEnemy=function(){e.char.type="enemy",e.char.show=!1,e.char.popupShow=!1;let i=(new Date).getTime();if(e.char.id=i,e.char.name)if(e.char.hitPoints)if(isNaN(parseInt(e.char.hitPoints))){o.hide(),h.hide(),r.show();new Popper(a,r,{placement:"bottom"})}else o.hide(),h.hide(),r.hide(),e.enemyChars.push(e.char),localStorage.setItem(`${e.char.id}`,JSON.stringify(e.char)),e.localChars.push(e.char),e.char={};else{o.hide(),h.show();new Popper(a,h,{placement:"bottom"})}else{o.show();new Popper(t,o,{placement:"bottom"})}},e.delete=function(t,a){if("hero"==a[0].type){let o=a.indexOf(t)+1;$(".pcRow")[o].remove(),e.playerChars.splice(o-1,1)}else if("enemy"==a[0].type){let o=a.indexOf(t)+1;$(".enemyRow")[o].remove(),e.enemyChars.splice(o-1,1)}o.hide(),localStorage.removeItem(`${t.id}`)},e.edit=function(e,t){e.hitPoints=parseInt(e.hitPoints);let a,h,r=t.indexOf(e);if(""!==e.name)if(o.hide(),isNaN(e.hitPoints)){if("hero"===e.type){a=$(".heroHpInput")[r];let e=$(".heroHpPopup")[r];h=new Popper(a,e,{placement:"top"})}else if("enemy"===e.type){a=$(".enemyHpInput")[r];let e=$(".enemyHpPopup")[r];h=new Popper(a,e,{placement:"top"})}e.popupShow=!0}else e.popupShow=!1,e.show=!e.show,localStorage.setItem(`${e.id}`,JSON.stringify(e));else{let e=$(".nameInput")[r];o.show();new Popper(e,o,{placement:"top"})}},e.increment=function(e,t){e.hitPoints=parseInt(e.hitPoints),e.hitPoints+=t,localStorage.setItem(`${e.id}`,JSON.stringify(e))},e.decrement=function(e,t){e.hitPoints=parseInt(e.hitPoints),e.hitPoints-=t,localStorage.setItem(`${e.id}`,JSON.stringify(e))}}]),angular.module("hpTracker").directive("tables",[function(){return{templateUrl:"../../views/tables.tpl.html",controller:"tableCtrl",replace:!1}}]);